<!DOCTYPE html> 
<html lang="en" data-theme="light"> 
<head> 
  <meta charset="UTF-8" /> 
  <title>DOM Practice - Notes</title> 
  <style> 
    :root { 
      --bg: #f8f9fa; --text: #212529; --card: white; --border: #dee2e6; 
      --primary: #0d6efd; --danger: #dc3545; --success: #198754; 
    } 
    [data-theme="dark"] { 
      --bg: #212529; --text: #e9ecef; --card: #343a40; --border: #495057; 
      --primary: #6ea8fe; --danger: #ff6b6b; --success: #51cf66; 
    } 
    body { font-family: system-ui; background: var(--bg); color: var(--text); padding: 20px; min-height: 
100vh; } 
    .container { max-width: 700px; margin: auto; } 
    header { text-align: center; margin-bottom: 20px; } 
    #theme-toggle { padding: 8px 16px; background: var(--primary); color: white; border: none; 
border-radius: 6px; cursor: pointer; } 
    form { display: flex; gap: 10px; margin-bottom: 15px; } 
    #note-input { flex: 1; padding: 12px; font-size: 1.1rem; border: 1px solid var(--border); border-radius: 
6px; background: var(--card); color: var(--text); } 
    #add-btn { padding: 12px 20px; background: var(--primary); color: white; border: none; 
border-radius: 6px; cursor: pointer; } 
    #search { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid var(--border); 
border-radius: 6px; background: var(--card); } 
    #notes-list { list-style: none; display: grid; gap: 12px; } 
    .note { 
      background: var(--card); border: 1px solid var(--border); border-radius: 8px; 
      padding: 16px; display: flex; flex-direction: column; gap: 10px; cursor: grab; 
    } 
    .note.completed .text { text-decoration: line-through; opacity: 0.6; } 
    .note.dragging { opacity: 0.4; transform: scale(0.98); } 
    .actions { display: flex; gap: 10px; justify-content: flex-end; } 
    .btn { padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; } 
    .btn-complete { background: var(--success); color: white; } 
    .btn-delete  { background: var(--danger);  color: white; } 
    .color-picker { width: 32px; height: 32px; border: none; cursor: pointer; } 
    #modal { 
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); 
      justify-content: center; align-items: center; 
    } 
    .modal-box { background: var(--card); padding: 24px; border-radius: 12px; width: 90%; max-width: 
400px; text-align: center; } 
    .modal-buttons { margin-top: 20px; display: flex; gap: 12px; justify-content: center; } 
  </style> 
</head> 
<body> 
 
<div class="container"> 
  <header> 
    <h1>Notes Manager</h1> 
    <button id="theme-toggle">Dark Mode</button> 
  </header> 
 
  <form id="note-form"> 
    <input id="note-input" placeholder="Type your note..." required /> 
    <button id="add-btn">Add</button> 
  </form> 
 
  <input id="search" placeholder="Search notes..." /> 
 
  <ul id="notes-list"></ul> 
 
  <button id="clear-completed" style="margin-top:20px; background:var(--danger); color:white; 
padding:10px 20px; border:none; border-radius:6px; cursor:pointer;"> 
    Clear Completed 
  </button> 
</div> 
 
<!-- Modal --> 
<div id="modal"> 
  <div class="modal-box"> 
    <h2>Clear all completed notes?</h2> 
    <div class="modal-buttons"> 
      <button id="modal-no" class="btn" style="background:#6c757d; color:white;">No</button> 
      <button id="modal-yes" class="btn" style="background:var(--danger); color:white;">Yes</button> 
    </div> 
  </div> 
</div> 
<script> 
const form = noteForm = document.getElementById("note-form");
const input = noteInput = document.getElementById("note-input");
const list = notes = document.getElementById("notes-list");
const search = document.getElementById("search");
const theme = document.getElementById("theme-toggle");

const clearBtn = document.getElementById("clear-completed");
const modal = document.getElementById("modal");
const yes = document.getElementById("modal-yes");
const no = document.getElementById("modal-no");

let drag;


/* 1. Add Note */
form.onsubmit = e => {
  e.preventDefault();

  if(!input.value) return;

  list.innerHTML += `
   <li class="note" draggable="true">
    <span class="text">${input.value}</span>

    <div class="actions">

     <input type="color" class="color-picker">

     <button class="btn btn-complete">Done</button>

     <button class="btn btn-delete">Del</button>

    </div>
   </li>
  `;

  input.value="";
};


/* 2â€“6. Click / Color / Edit */
list.onclick = e => {

  let note = e.target.closest(".note");

  if(!note) return;

  if(e.target.classList.contains("btn-delete"))
    note.remove();

  if(e.target.classList.contains("btn-complete"))
    note.classList.toggle("completed");
};


list.oninput = e => {

  if(e.target.type=="color")
   e.target.closest(".note").style.background =
   e.target.value;
};


list.ondblclick = e => {

  if(!e.target.classList.contains("text")) return;

  let i = document.createElement("input");

  i.value = e.target.textContent;

  e.target.replaceWith(i);

  i.onblur = () => {
    let s = document.createElement("span");
    s.className="text";
    s.textContent=i.value;

    i.replaceWith(s);
  };
};


/* 7. Drag Drop */
list.ondragstart = e => drag=e.target;

list.ondragover = e => e.preventDefault();

list.ondrop = e => list.insertBefore(drag,e.target);


/* 8. Search */
search.oninput = () => {

  let v = search.value.toLowerCase();

  document.querySelectorAll(".note")
  .forEach(n=>{

   n.style.display =
   n.textContent.toLowerCase().includes(v)
   ? "block":"none";
  });
};


/* 9. Theme */
theme.onclick = () => {

  let h = document.documentElement;

  h.dataset.theme =
  h.dataset.theme=="light"
  ? "dark":"light";
};


/* 10. Clear + Modal */
clearBtn.onclick = () => modal.style.display="flex";

no.onclick = () => modal.style.display="none";

yes.onclick = () => {

  document.querySelectorAll(".completed")
  .forEach(n=>n.remove());

  modal.style.display="none";
};
</script> 
</body> 
</html> 